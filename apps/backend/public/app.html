<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè• MediApp - Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="/assets/core/design-system.css" rel="stylesheet">
    <link href="/assets/core/components.css" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <div class="mediapp-header">
        <div class="container">
            <div class="header-content">
                <div class="header-brand">
                    <i class="fas fa-heartbeat"></i>
                    <span>MediApp</span>
                </div>
                <nav class="header-nav">
                    <a href="/app.html" class="nav-btn active">
                        <i class="fas fa-home"></i>
                        Dashboard
                    </a>
                    <a href="/gestao-medicos.html" class="nav-btn">
                        <i class="fas fa-user-md"></i>
                        M√©dicos
                    </a>
                    <a href="/gestao-pacientes.html" class="nav-btn">
                        <i class="fas fa-users"></i>
                        Pacientes
                    </a>
                </nav>
            </div>
        </div>
    </div>

    <div class="container">
        <h1 class="page-title">
            <i class="fas fa-home"></i>
            Dashboard
        </h1>

        <!-- Stats Cards -->
        <div class="grid grid-cols-4 mb-8">
            <div class="card">
                <div class="card-body text-center">
                    <div id="totalMedicos" class="text-3xl font-bold text-primary mb-2">15</div>
                    <div class="text-sm text-gray-600">Total de M√©dicos</div>
                </div>
            </div>
            <div class="card">
                <div class="card-body text-center">
                    <div id="totalPacientes" class="text-3xl font-bold text-success mb-2">5</div>
                    <div class="text-sm text-gray-600">Total de Pacientes</div>
                </div>
            </div>
            <div class="card">
                <div class="card-body text-center">
                    <div id="consultasHoje" class="text-3xl font-bold text-warning mb-2">0</div>
                    <div class="text-sm text-gray-600">Consultas Hoje</div>
                </div>
            </div>
            <div class="card">
                <div class="card-body text-center">
                    <div id="consultasSemana" class="text-3xl font-bold text-info mb-2">1.456</div>
                    <div class="text-sm text-gray-600">Consultas na Semana</div>
                </div>
            </div>
        </div>

        <!-- Main Features Grid -->
        <div class="grid grid-cols-3 gap-6 mb-8">
            <!-- Gest√£o de M√©dicos -->
            <div class="card feature-card" data-navigate="/gestao-medicos.html">
                <div class="card-body text-center p-8">
                    <div class="feature-icon text-primary mb-4">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <h3 class="feature-title mb-3">Gest√£o de M√©dicos</h3>
                    <p class="feature-description text-gray-600 mb-4">
                        Cadastre, edite e gerencie m√©dicos, especialidades e informa√ß√µes profissionais.
                    </p>
                    <div class="feature-stats mb-4">
                        <span class="stat-badge" id="totalMedicosCard">15</span>
                        <span class="text-sm text-gray-500">m√©dicos cadastrados</span>
                    </div>
                    <button class="btn btn-primary btn-sm">
                        <i class="fas fa-arrow-right"></i>
                        Acessar
                    </button>
                </div>
            </div>

            <!-- Gest√£o de Pacientes -->
            <div class="card feature-card" data-navigate="/gestao-pacientes.html">
                <div class="card-body text-center p-8">
                    <div class="feature-icon text-success mb-4">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3 class="feature-title mb-3">Gest√£o de Pacientes</h3>
                    <p class="feature-description text-gray-600 mb-4">
                        Cadastre pacientes, hist√≥rico m√©dico, conv√™nios e dados pessoais.
                    </p>
                    <div class="feature-stats mb-4">
                        <span class="stat-badge" id="totalPacientesCard">5</span>
                        <span class="text-sm text-gray-500">pacientes cadastrados</span>
                    </div>
                    <button class="btn btn-success btn-sm">
                        <i class="fas fa-arrow-right"></i>
                        Acessar
                    </button>
                </div>
            </div>

            <!-- Gest√£o de Consultas -->
            <div class="card feature-card" data-navigate="/gestao-consultas.html">
                <div class="card-body text-center p-8">
                    <div class="feature-icon text-info mb-4">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <h3 class="feature-title mb-3">Gest√£o de Consultas</h3>
                    <p class="feature-description text-gray-600 mb-4">
                        Agende, gerencie e acompanhe consultas m√©dicas e hor√°rios.
                    </p>
                    <div class="feature-stats mb-4">
                        <span class="stat-badge" id="consultasHojeCard">0</span>
                        <span class="text-sm text-gray-500">consultas hoje</span>
                    </div>
                    <button class="btn btn-info btn-sm">
                        <i class="fas fa-arrow-right"></i>
                        Acessar
                    </button>
                </div>
            </div>

            <!-- Prontu√°rios -->
            <div class="card feature-card" data-navigate="/prontuarios.html">
                <div class="card-body text-center p-8">
                    <div class="feature-icon text-warning mb-4">
                        <i class="fas fa-file-medical"></i>
                    </div>
                    <h3 class="feature-title mb-3">Prontu√°rios</h3>
                    <p class="feature-description text-gray-600 mb-4">
                        Gerencie prontu√°rios eletr√¥nicos, anamneses e hist√≥rico m√©dico.
                    </p>
                    <div class="feature-stats mb-4">
                        <span class="stat-badge" id="prontuariosCard">0</span>
                        <span class="text-sm text-gray-500">prontu√°rios ativos</span>
                    </div>
                    <button class="btn btn-warning btn-sm">
                        <i class="fas fa-arrow-right"></i>
                        Acessar
                    </button>
                </div>
            </div>

            <!-- Prescri√ß√µes -->
            <div class="card feature-card" data-navigate="/prescricao-medica.html">
                <div class="card-body text-center p-8">
                    <div class="feature-icon text-purple mb-4">
                        <i class="fas fa-prescription-bottle"></i>
                    </div>
                    <h3 class="feature-title mb-3">Prescri√ß√µes M√©dicas</h3>
                    <p class="feature-description text-gray-600 mb-4">
                        Crie e gerencie prescri√ß√µes m√©dicas digitais e receitu√°rios.
                    </p>
                    <div class="feature-stats mb-4">
                        <span class="stat-badge" id="prescricoesCard">0</span>
                        <span class="text-sm text-gray-500">prescri√ß√µes emitidas</span>
                    </div>
                    <button class="btn btn-purple btn-sm">
                        <i class="fas fa-arrow-right"></i>
                        Acessar
                    </button>
                </div>
            </div>

            <!-- Relat√≥rios -->
            <div class="card feature-card" data-navigate="/relatorios.html">
                <div class="card-body text-center p-8">
                    <div class="feature-icon text-secondary mb-4">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h3 class="feature-title mb-3">Relat√≥rios</h3>
                    <p class="feature-description text-gray-600 mb-4">
                        Gere relat√≥rios detalhados, estat√≠sticas e an√°lises do sistema.
                    </p>
                    <div class="feature-stats mb-4">
                        <span class="stat-badge" id="relatoriosCard">12</span>
                        <span class="text-sm text-gray-500">relat√≥rios dispon√≠veis</span>
                    </div>
                    <button class="btn btn-secondary btn-sm">
                        <i class="fas fa-arrow-right"></i>
                        Acessar
                    </button>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="card mb-8">
            <div class="card-header">
                <h2 class="card-title">
                    <i class="fas fa-rocket"></i>
                    A√ß√µes R√°pidas
                </h2>
            </div>
            <div class="card-body">
                <div class="grid grid-cols-4 gap-4">
                    <button class="btn btn-primary btn-lg" data-navigate="/gestao-medicos.html">
                        <i class="fas fa-user-md"></i>
                        Novo M√©dico
                    </button>
                    <button class="btn btn-success btn-lg" data-navigate="/gestao-pacientes.html">
                        <i class="fas fa-user-plus"></i>
                        Novo Paciente
                    </button>
                    <button class="btn btn-info btn-lg" data-navigate="/gestao-consultas.html">
                        <i class="fas fa-calendar-plus"></i>
                        Nova Consulta
                    </button>
                    <button class="btn btn-warning btn-lg" data-navigate="/prontuarios.html">
                        <i class="fas fa-file-medical-alt"></i>
                        Novo Prontu√°rio
                    </button>
                </div>
            </div>
        </div>

        <!-- Recent Activities -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">
                    <i class="fas fa-clock"></i>
                    Atividades Recentes
                </h2>
            </div>
            <div class="card-body">
                <!-- Loading -->
                <div id="loadingActivities" class="loading hidden">
                    <i class="fas fa-spinner fa-spin"></i>
                    Carregando atividades...
                </div>
                
                <!-- Activities -->
                <div id="recentActivities">
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-user-md text-primary"></i>
                        </div>
                        <div class="activity-content">
                            <h4>Novo m√©dico cadastrado</h4>
                            <p>Dr. Jo√£o Silva - Cardiologia</p>
                            <span class="activity-time">H√° 2 horas</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-users text-success"></i>
                        </div>
                        <div class="activity-content">
                            <h4>Paciente atualizado</h4>
                            <p>Maria Santos - Dados atualizados</p>
                            <span class="activity-time">H√° 3 horas</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-calendar text-info"></i>
                        </div>
                        <div class="activity-content">
                            <h4>Consulta agendada</h4>
                            <p>Pedro Costa - 15/11/2025 14:30</p>
                            <span class="activity-time">H√° 5 horas</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/assets/core/mediapp-core.js"></script>
    <script src="/assets/scripts/main-app.js"></script>
    
    <script>
        // Carregamento das estat√≠sticas do dashboard
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                console.log('üöÄ Carregando estat√≠sticas do dashboard...');
                
                const response = await fetch('/api/statistics/dashboard');
                if (response.ok) {
                    const result = await response.json();
                    
                    if (result.success) {
                        // Nossa API retorna: {medicos: {total, ativos}, pacientes: {total}, ...}
                        
                        // Atualizar cards principais
                        document.getElementById('totalMedicos').textContent = result.medicos?.ativos || '0';
                        document.getElementById('totalPacientes').textContent = result.pacientes?.total || '0';
                        document.getElementById('consultasHoje').textContent = result.consultas?.total || '0';
                        document.getElementById('consultasSemana').textContent = result.consultas?.total || '0';
                        
                        // Atualizar cards de funcionalidades (se existirem)
                        const totalMedicosCard = document.getElementById('totalMedicosCard');
                        const totalPacientesCard = document.getElementById('totalPacientesCard');
                        const consultasHojeCard = document.getElementById('consultasHojeCard');
                        const prontuariosCard = document.getElementById('prontuariosCard');
                        const prescricoesCard = document.getElementById('prescricoesCard');
                        
                        if (totalMedicosCard) totalMedicosCard.textContent = result.medicos?.total || '0';
                        if (totalPacientesCard) totalPacientesCard.textContent = result.pacientes?.total || '0';
                        if (consultasHojeCard) consultasHojeCard.textContent = result.consultas?.total || '0';
                        if (prontuariosCard) prontuariosCard.textContent = '0'; // N√£o temos esses dados ainda
                        if (prescricoesCard) prescricoesCard.textContent = '0'; // N√£o temos esses dados ainda
                        
                        console.log('‚úÖ Estat√≠sticas carregadas com sucesso!');
                    }
                } else {
                    console.warn('‚ö†Ô∏è API n√£o dispon√≠vel, mantendo valores padr√£o');
                }
            } catch (error) {
                console.warn('‚ö†Ô∏è Erro ao carregar estat√≠sticas:', error);
            }
        });

        // Navega√ß√£o entre p√°ginas
        function navigateTo(url) {
            window.location.href = url;
        }

        // Feature cards interativas
        document.addEventListener('DOMContentLoaded', function() {
            const featureCards = document.querySelectorAll('.feature-card');
            featureCards.forEach(card => {
                card.style.cursor = 'pointer';
                card.style.transition = 'all 0.3s ease';
                
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-4px)';
                    this.style.boxShadow = '0 8px 25px rgba(0,0,0,0.1)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = '';
                });
            });
        });
    </script>
</body>
</html>