<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª Teste do BotÃ£o Editar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            margin: 1rem;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
        }
        .btn:hover {
            background: #0056b3;
        }
        .status {
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; }
        .info { background: #d1ecf1; color: #0c5460; }
        .warning { background: #fff3cd; color: #856404; }
        pre {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
        }
        .test-result {
            margin: 1rem 0;
            padding: 1rem;
            border-left: 4px solid #007bff;
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Teste do BotÃ£o Editar - Lista de MÃ©dicos</h1>
        
        <div class="status success">
            âœ… Servidor rodando na porta 3002
        </div>
        
        <h2>ğŸ”— Links para Teste</h2>
        
        <a href="http://localhost:3002/lista-medicos.html" class="btn" target="_blank">
            ğŸ“‹ Abrir Lista de MÃ©dicos
        </a>
        
        <a href="http://localhost:3002/editar-medico.html?id=cmh3slen1000z6a4gsq8j8eun" class="btn" target="_blank">
            âœï¸ Abrir EdiÃ§Ã£o Direta
        </a>
        
        <h2>ğŸ“‹ InstruÃ§Ãµes de Teste</h2>
        
        <div class="test-result">
            <h3>1. Teste Manual do BotÃ£o Editar</h3>
            <ol>
                <li><strong>Clique em "ğŸ“‹ Abrir Lista de MÃ©dicos"</strong></li>
                <li><strong>Aguarde</strong> o carregamento da lista (deve aparecer 10 mÃ©dicos)</li>
                <li><strong>Abra o Console do navegador</strong> (F12 â†’ Console)</li>
                <li><strong>Procure pelos logs</strong>:
                    <pre>ğŸš€ PÃ¡gina de lista de mÃ©dicos carregada
ğŸ”§ FunÃ§Ã£o editDoctor disponÃ­vel: true
ğŸ“‹ Criando card para mÃ©dico: Dr. [Nome]
âœ… Card criado com botÃ£o Editar para ID: [ID]</pre>
                </li>
                <li><strong>Clique no botÃ£o "Editar"</strong> de qualquer mÃ©dico</li>
                <li><strong>Verifique no console</strong> se aparece:
                    <pre>ğŸ”§ FunÃ§Ã£o editDoctor chamada com ID: [ID]
ğŸ”„ Redirecionando para ediÃ§Ã£o...
ğŸŒ URL de destino: /editar-medico.html?id=[ID]</pre>
                </li>
                <li><strong>Confirme</strong> se foi redirecionado para a pÃ¡gina de ediÃ§Ã£o</li>
                <li><strong>Verifique</strong> se os dados do mÃ©dico foram carregados</li>
            </ol>
        </div>
        
        <div class="test-result">
            <h3>2. VerificaÃ§Ã£o de Funcionamento</h3>
            <div class="status info">
                <strong>âœ… Componentes Verificados:</strong><br>
                â€¢ BotÃ£o "Editar" presente no HTML<br>
                â€¢ FunÃ§Ã£o editDoctor() implementada<br>
                â€¢ Redirecionamento para /editar-medico.html?id=[ID]<br>
                â€¢ PÃ¡gina de ediÃ§Ã£o acessÃ­vel<br>
                â€¢ API de mÃ©dicos funcionando
            </div>
        </div>
        
        <div class="test-result">
            <h3>3. PossÃ­veis Problemas</h3>
            <div class="status warning">
                <strong>Se o botÃ£o nÃ£o funcionar, verifique:</strong><br>
                â€¢ Console do navegador para erros JavaScript<br>
                â€¢ Se os mÃ©dicos estÃ£o carregando na lista<br>
                â€¢ Se hÃ¡ erros de rede (F12 â†’ Network)<br>
                â€¢ Cache do navegador (Ctrl+F5 para refresh forÃ§ado)
            </div>
        </div>
        
        <h2>ğŸ”§ Status TÃ©cnico</h2>
        
        <div id="statusTecnico">
            <p>Verificando status...</p>
        </div>
        
        <h2>ğŸ‘¨â€âš•ï¸ MÃ©dicos DisponÃ­veis</h2>
        
        <div id="listaMedicos">
            <p>Carregando lista...</p>
        </div>
    </div>

    <script>
        // Verificar status tÃ©cnico
        async function verificarStatus() {
            const statusDiv = document.getElementById('statusTecnico');
            const medicosDiv = document.getElementById('listaMedicos');
            
            try {
                // Testar API
                const response = await fetch('/api/medicos');
                const data = await response.json();
                
                statusDiv.innerHTML = `
                    <div class="status success">
                        âœ… API funcionando<br>
                        ğŸ“Š Status: ${response.status}<br>
                        ğŸ‘¨â€âš•ï¸ MÃ©dicos encontrados: ${data.data.length}
                    </div>
                `;
                
                // Mostrar lista de mÃ©dicos
                medicosDiv.innerHTML = `
                    <div class="status info">
                        ${data.data.map(medico => `
                            <div style="margin: 0.5rem 0; padding: 0.5rem; border-left: 3px solid #007bff;">
                                <strong>${medico.nome}</strong> - ${medico.especialidade}<br>
                                <small>ID: ${medico.id} | CRM: ${medico.crm}/${medico.crm_uf}</small><br>
                                <a href="/editar-medico.html?id=${medico.id}" target="_blank" style="color: #007bff;">
                                    ğŸ”— Testar ediÃ§Ã£o direta
                                </a>
                            </div>
                        `).join('')}
                    </div>
                `;
                
            } catch (error) {
                statusDiv.innerHTML = `
                    <div class="status warning">
                        âš ï¸ Erro ao conectar com API<br>
                        Erro: ${error.message}
                    </div>
                `;
                
                medicosDiv.innerHTML = `
                    <div class="status warning">
                        âŒ NÃ£o foi possÃ­vel carregar a lista de mÃ©dicos
                    </div>
                `;
            }
        }
        
        // Executar verificaÃ§Ã£o ao carregar
        document.addEventListener('DOMContentLoaded', verificarStatus);
    </script>
</body>
</html>